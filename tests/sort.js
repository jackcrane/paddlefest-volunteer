const d = [
  {
    _id: "629a8f0e5634feafc135eea9",
    title: "Registration",
    description: "Help check in paddlers",
    restrictions: [],
    location: "expo",
    shifts: [
      {
        start: "2022-08-05T19:00:00.000Z",
        end: "2022-08-05T21:00:00.000Z",
        _id: "629a8f0e5634feafc135eea6",
        max: 5,
        volunteers: [
          "62b5cc100a64ef6ec03eb657",
          "62b6199bda4dff96795f7ff5",
          "62cb1d37e6f40049991e20fb",
        ],
      },
      {
        start: "2022-08-05T21:00:00.000Z",
        end: "2022-08-05T23:00:00.000Z",
        _id: "629a8f0e5634feafc135eea7",
        max: 5,
        volunteers: [
          "62b5cc100a64ef6ec03eb657",
          "62b6199bda4dff96795f7ff5",
          "62bdf621b0b51447f7175e53",
          "62cb1e0888c12991131dd2b6",
          "62cddec8be93ff0dfd03ace2",
        ],
      },
      {
        start: "2022-08-05T23:00:00.000Z",
        end: "2022-08-06T01:00:00.000Z",
        _id: "629a8f0e5634feafc135eea8",
        max: 5,
        volunteers: [
          "62b5cc100a64ef6ec03eb657",
          "62b6199bda4dff96795f7ff5",
          "62cddec8be93ff0dfd03ace2",
        ],
      },
    ],
    timestamp: "2022-06-03T22:45:34.224Z",
  },
  {
    _id: "629a8fbb5634feafc135eead",
    title: "Raffle",
    description: "Ticket sales",
    restrictions: [],
    location: "expo",
    shifts: [
      {
        start: "2022-08-05T19:30:00.000Z",
        end: "2022-08-05T21:30:00.000Z",
        _id: "629a8fbb5634feafc135eeaa",
        max: 3,
        volunteers: ["62bb6aee62383d9fc1edc9cd"],
      },
      {
        start: "2022-08-05T21:30:00.000Z",
        end: "2022-08-05T23:30:00.000Z",
        _id: "629a8fbb5634feafc135eeab",
        max: 3,
        volunteers: ["62bb6aee62383d9fc1edc9cd"],
      },
      {
        start: "2022-08-05T23:30:00.000Z",
        end: "2022-08-06T01:30:00.000Z",
        _id: "629a8fbb5634feafc135eeac",
        max: 3,
        volunteers: ["62bb6aee62383d9fc1edc9cd"],
      },
    ],
    timestamp: "2022-06-03T22:48:27.846Z",
  },
  {
    _id: "629a90335634feafc135eeb1",
    title: "Beer",
    description: "Beer sales",
    restrictions: ["Must be over 21"],
    location: "expo",
    shifts: [
      {
        start: "2022-08-05T19:30:00.000Z",
        end: "2022-08-05T21:30:00.000Z",
        _id: "629a90335634feafc135eeae",
        max: 8,
        volunteers: [
          "62b600c0da4dff96795f7ff4",
          "62bb197162383d9fc1edc9cc",
          "62bb2c0352420c4408778f81",
          "62c5bd32b0b51447f7175e5a",
          "62cec17467f5a83aec0a1301",
        ],
      },
      {
        start: "2022-08-05T21:30:00.000Z",
        end: "2022-08-05T23:30:00.000Z",
        _id: "629a90335634feafc135eeaf",
        max: 8,
        volunteers: [
          "62b600c0da4dff96795f7ff4",
          "62bf707cb0b51447f7175e57",
          "62c598ff3d2dd5e923f52b26",
          "62c5bd32b0b51447f7175e5a",
          "62c70eda3962061dce9e275e",
        ],
      },
      {
        start: "2022-08-05T23:30:00.000Z",
        end: "2022-08-06T01:30:00.000Z",
        _id: "629a90335634feafc135eeb0",
        max: 8,
        volunteers: [
          "62b600c0da4dff96795f7ff4",
          "62c598ff3d2dd5e923f52b26",
          "62c5bd32b0b51447f7175e5a",
          "62c88cfbe6f40049991e20fa",
        ],
      },
    ],
    timestamp: "2022-06-03T22:50:27.802Z",
  },
  {
    _id: "629a90d704d47aa502167652",
    title: "Merch",
    description: "Sell Paddlefest merchandise",
    restrictions: [],
    location: "expo",
    shifts: [
      {
        start: "2022-08-05T19:30:00.000Z",
        end: "2022-08-05T21:30:00.000Z",
        _id: "629a90d704d47aa502167650",
        volunteers: ["62bb6ab652420c4408778f83"],
        max: 3,
      },
      {
        start: "2022-08-05T21:30:00.000Z",
        end: "2022-08-05T23:30:00.000Z",
        _id: "629a90d704d47aa502167651",
        volunteers: ["62bb6ab652420c4408778f83", "62bb738d52420c4408778f84"],
        max: 3,
      },
      {
        start: "2022-08-05T23:30:00.000Z",
        end: "2022-08-06T01:30:00.000Z",
        _id: "629a92739a8f507fc38344a9",
        volunteers: ["62bb6ab652420c4408778f83"],
        max: 3,
      },
    ],
    timestamp: "2022-06-03T22:53:11.491Z",
  },
  {
    _id: "629a930b94c8207a4adf532b",
    title: "General Help",
    description:
      "Set up and help out as needed (If you don't care what to do, select this)",
    restrictions: [],
    location: "expo",
    shifts: [
      {
        start: "2022-08-05T19:30:00.000Z",
        end: "2022-08-05T21:30:00.000Z",
        _id: "629a930b94c8207a4adf5328",
        volunteers: [
          "62b5c4e40c5d254b83b6bb35",
          "62b5df112eb5d69bb0097895",
          "62b5e3cad9a631a04c5ba6c1",
          "62bb21620502f98c228635f7",
          "62c593733d2dd5e923f52b25",
        ],
        max: "12",
      },
      {
        start: "2022-08-05T21:30:00.000Z",
        end: "2022-08-05T23:30:00.000Z",
        _id: "629a930b94c8207a4adf5329",
        volunteers: [
          "62b5c4e40c5d254b83b6bb35",
          "62b5df112eb5d69bb0097895",
          "62b5e3cad9a631a04c5ba6c1",
          "62bb21620502f98c228635f7",
          "62bdbfd752420c4408778f88",
          "62c593733d2dd5e923f52b25",
        ],
        max: "12",
      },
      {
        start: "2022-08-05T23:30:00.000Z",
        end: "2022-08-06T01:30:00.000Z",
        _id: "629a930b94c8207a4adf532a",
        volunteers: [
          "62b5e3cad9a631a04c5ba6c1",
          "62bb21620502f98c228635f7",
          "62bda297b0b51447f7175e4f",
          "62c593733d2dd5e923f52b25",
        ],
        max: "12",
      },
    ],
    timestamp: "2022-06-03T23:02:35.361Z",
  },
  {
    _id: "629a935494c8207a4adf532f",
    title: "Green Team",
    description:
      "Help our event work towards our zero waste goal by directing attendees to dispose of trash, recycling, and compost appropriately",
    restrictions: [],
    location: "expo",
    shifts: [
      {
        start: "2022-08-05T19:30:00.000Z",
        end: "2022-08-05T21:30:00.000Z",
        _id: "629a935494c8207a4adf532c",
        volunteers: [
          "62bcdb1252420c4408778f85",
          "62bcdc6452420c4408778f86",
          "62bccade62383d9fc1edc9d0",
          "62c88cfbe6f40049991e20fa",
        ],
        max: "6",
      },
      {
        start: "2022-08-05T21:30:00.000Z",
        end: "2022-08-05T23:30:00.000Z",
        _id: "629a935494c8207a4adf532d",
        volunteers: ["62bccade62383d9fc1edc9d0", "62c88cfbe6f40049991e20fa"],
        max: "6",
      },
      {
        start: "2022-08-05T23:30:00.000Z",
        end: "2022-08-06T01:30:00.000Z",
        _id: "629a935494c8207a4adf532e",
        volunteers: [],
        max: "6",
      },
    ],
    timestamp: "2022-06-03T23:03:48.455Z",
  },
  {
    _id: "629a93aa94c8207a4adf5333",
    title: "Camping",
    description:
      "Assist with checking in campers and helping them park and get to their sites",
    restrictions: [],
    location: "expo",
    shifts: [
      {
        start: "2022-08-05T19:30:00.000Z",
        end: "2022-08-05T21:30:00.000Z",
        _id: "629a93aa94c8207a4adf5330",
        volunteers: ["62be2f6be2fdf5307abcf763", "62c4d40849e544f5812a2436"],
        max: "2",
      },
      {
        start: "2022-08-05T21:30:00.000Z",
        end: "2022-08-05T23:30:00.000Z",
        _id: "629a93aa94c8207a4adf5331",
        volunteers: ["62c349ee3d2dd5e923f52b23", "62c81850be93ff0dfd03ace1"],
        max: "2",
      },
      {
        start: "2022-08-05T23:30:00.000Z",
        end: "2022-08-06T01:30:00.000Z",
        _id: "629a93aa94c8207a4adf5332",
        volunteers: [],
        max: "2",
      },
    ],
    timestamp: "2022-06-03T23:05:14.153Z",
  },
  {
    _id: "629a941594c8207a4adf5338",
    title: "Gear sale",
    description: "Help set up and run the gear sale",
    restrictions: [],
    location: "expo",
    shifts: [
      {
        start: "2022-08-05T20:00:00.000Z",
        end: "2022-08-05T22:00:00.000Z",
        _id: "629a941594c8207a4adf5336",
        volunteers: ["62b5be840c5d254b83b6bb34"],
        max: "2",
      },
      {
        start: "2022-08-05T22:00:00.000Z",
        end: "2022-08-06T00:00:00.000Z",
        _id: "629a941594c8207a4adf5337",
        volunteers: ["62b5be840c5d254b83b6bb34"],
        max: "2",
      },
    ],
    timestamp: "2022-06-03T23:07:01.805Z",
  },
  {
    _id: "62c7131b8b974472424236de",
    title: "Racer Registration",
    description: "Help paddlers register for the race",
    restrictions: [],
    location: "expo",
    shifts: [
      {
        start: "2022-08-06T19:00:00.000Z",
        end: "2022-08-06T21:00:00.000Z",
        _id: "62c7131b8b974472424236db",
        volunteers: ["62c71f5ee6f40049991e20f9"],
        max: "4",
      },
      {
        start: "2022-08-05T21:00:00.000Z",
        end: "2022-08-05T23:00:00.000Z",
        _id: "62c7131b8b974472424236dc",
        volunteers: ["62c71f5ee6f40049991e20f9"],
        max: "4",
      },
      {
        start: "2022-08-05T23:00:00.000Z",
        end: "2022-08-06T01:00:00.000Z",
        _id: "62c7131b8b974472424236dd",
        volunteers: ["62c71f5ee6f40049991e20f9"],
        max: "4",
      },
    ],
    timestamp: "2022-07-07T17:08:43.922Z",
  },
];

const average = (array) => array.reduce((a, b) => a + b) / array.length;

// Sort by the percentage of fill on each shift
d.sort((a, b) => {
  let aFillStates = a.shifts.map((shift) => {
    return shift.volunteers.length / shift.max;
  });
  let bFillStates = b.shifts.map((shift) => {
    return shift.volunteers.length / shift.max;
  });
  return average(aFillStates) - average(bFillStates);
});

console.log(JSON.stringify(d));
